
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Chen Rui&#39;s Blog">
    <title>How to install v2ray service on R7800 - Chen Rui&#39;s Blog</title>
    <meta name="author" content="">
    
        <meta name="keywords" content="r7800">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":null,"sameAs":["https://github.com/crotoc?tab=repositories","mailto:crotoc@gmail.com"],"image":"https://www.insidescience.org/sites/default/files/sites/default/files/images/articles/top-images/2018/5_heic1808a_crop.jpg"},"articleBody":"\n如何在netgear R7800上面安装v2ray服务\n我在前面一篇博客里面写过如何安装ss的服务，由于常用的ss失效（端口被封，ss已经能够被特征识别），所以折腾了一下v2ray。这想这应该也是大势所趋吧。\n要求\n一台安装了openWRT的路由器，本文使用r7800。\n一个可用的v2ray服务器，可以花钱买，也可以自己用虚拟机搭建一个。本文使用自己搭建。\n一个ubuntu系统用于编译相关的软件，使v2ray服务可以在router上面运行。\n如果部署过ss服务器和客户端，那就完美了\n懂一些linux\n\n部署v2ray服务端这一部分主要参看了这个教程，在这里我只写下主要步骤。\n登陆自己需要部署v2ray的服务器，如果是翻回国内就搞个有国内公网ip的虚拟机，如果科学上网，就弄个有国外ip虚拟机。然后下载脚本并且安装：\nwget https://install.direct/go.sh\nsudo bash go.sh\n如果其中缺少什么依赖包，就自己安装好。\nv2ray服务器端配置文件和ss服务器一样，需要针对v2ray写一个配置文件，这是我的。下面我来解释一下配置文件的内容:\n{\n//设置v2ray的log和orr文件；设置log的level\n&quot;log&quot;: {\n    &quot;access&quot;: &quot;/home/ruichen/v2ray/v2ray.log&quot;,\n    &quot;error&quot;: &quot;/home/ruichen/v2ray/v2ray.err&quot;,\n    &quot;loglevel&quot;: &quot;warning&quot;\n    },\n//服务器端入站包的配置，即代理服务器信息\n&quot;inbounds&quot;:[//main port\n{\n    &quot;port&quot;: 18888,\n    &quot;listen&quot;: &quot;0.0.0.0&quot;,\n    &quot;protocol&quot;: &quot;vmess&quot;,\n    &quot;settings&quot;: {\n    &quot;clients&quot;: [\n        {\n//这里需要一个UUID，可以找网站生成一个，相当于ss的用户名。\n        &quot;id&quot;: &quot;67ee3d0e-77c1-4776-8573-82ebc55176f9&quot;,\n        &quot;alterId&quot;: 64\n        }\n    ],\n    //因为现在端口被查的厉害，所以我使用了一个随机端口的策略，避免长期使用一个端口容易被封。先建立一个绕行端口的通讯。\n    &quot;detour&quot;: { //绕行配置，即指示客户端使用 dynamicPort 的配置通信\n        &quot;to&quot;: &quot;dynamicPort&quot;\n    }\n    },\n    //这里的流量协议，我使用简单的kcp，听说比tcp好些\n    &quot;streamSettings&quot;: {\n        &quot;network&quot;: &quot;kcp&quot;\n    }\n    },\n{\n//随机端口的配置\n    &quot;protocol&quot;: &quot;vmess&quot;,\n    &quot;port&quot;: &quot;18900-19000&quot;, // 端口范围\n    &quot;tag&quot;: &quot;dynamicPort&quot;,  // 与上面的 detour to 相同\n    &quot;settings&quot;: {\n        &quot;default&quot;: {\n        &quot;alterId&quot;: 64\n    }\n    },\n    //如何分配随机端口\n    &quot;allocate&quot;: {            // 分配模式\n        &quot;strategy&quot;: &quot;random&quot;,  // 随机开启\n        &quot;concurrency&quot;: 2,      // 同时开放两个端口,这个值最大不能超过端口范围的 1/3\n        &quot;refresh&quot;: 3           // 每三分钟刷新一次\n    },\n    &quot;streamSettings&quot;: {\n        &quot;network&quot;: &quot;kcp&quot;\n    }\n}\n],\n//服务器端的出站包配置，这里使用freedom，意思就是自动处理进来包的类型\n&quot;outbounds&quot;: [{\n    &quot;protocol&quot;: &quot;freedom&quot;,\n    &quot;settings&quot;: {}\n}],\n//v2ray自带一个routing的功能，能够将设置的ip或者域名自动的routing。其中outboundTag有三种，这里使用blocked，意思是从这些ip来的通讯全部屏蔽掉，下面主要是本机的私有地址。\n&quot;routing&quot;: {\n    &quot;strategy&quot;: &quot;rules&quot;,\n    &quot;settings&quot;: {\n    &quot;rules&quot;: [\n        {\n        &quot;type&quot;: &quot;field&quot;,\n        &quot;ip&quot;: [\n            &quot;0.0.0.0/8&quot;,\n            &quot;10.0.0.0/8&quot;,\n            &quot;100.64.0.0/10&quot;,\n            &quot;127.0.0.0/8&quot;,\n            &quot;169.254.0.0/16&quot;,\n            &quot;172.16.0.0/12&quot;,\n            &quot;192.0.0.0/24&quot;,\n            &quot;192.0.2.0/24&quot;,\n            &quot;192.168.0.0/16&quot;,\n            &quot;198.18.0.0/15&quot;,\n            &quot;198.51.100.0/24&quot;,\n            &quot;203.0.113.0/24&quot;,\n            &quot;::1/128&quot;,\n            &quot;fc00::/7&quot;,\n            &quot;fe80::/10&quot;\n        ],\n        &quot;outboundTag&quot;: &quot;blocked&quot;\n    }\n    ]\n}\n    }\n}\nUUID可以使用网站随机生成一个。\n运行v2ray服务端到这里我们就算配置完成了，首先使用下面命令测试一下config.json是否存在错误：\n/usr/bin/v2ray/v2ray -test -config /etc/v2ray/config.json\n如果顺利通过，就可以运行服务器：\n/usr/bin/v2ray/v2ray -config /etc/v2ray/config.json\n如果想使用systemctl来启动v2ray，需要用你的配置文件替换掉系统中/etc/v2ray/目录下的config.json文件。我这里使用软连接的方式，方便以后修改。\nrm /etc/v2ray/config.json\nln -s ~/v2ray/config.json /etc/v2ray/config.json\n客户端部署v2ray比较神奇的地方在于客户端其实使用的是服务端的程序，只是配置文件不同。我这次需要将客户端安装到路由器上。\nopenWRT的安装直接参看前面的如何在路由器上安装openwrt\n编译v2ray安装包由于v2ray比较新，是ss被喝茶之后出现的，所以现在openwrt各版本并没有直接的安装包，我这里借用了lean大的lede项目中的v2ray源码包。这个lede项目集成了很多种架构的核心，希望大家的router都能在里面找到。\n首先，安装一个ubuntu 64bit，然后lede项目克隆到本地：\ngit clone https://github.com/coolsnowwolf/lede\n接着，进入lede目录，更新并安装feeds：\ncd lede\n./scripts/feeds update -a\n./scripts/feeds install -a\n再接着使用gui界面选择需要编译的路由：\nmake menuconfig\n在这个gui界面中，需要做如下选择：\n\nTarget System下面的Qualcomm Atheros IPQ806X，因为r7800的就是使用的这颗核心。\nNetwork目录下的v2ray需要选上。\nLuCI下面的Application下的Include V2ray需要选上。\n\n然后编译：\nmake -j1 V=s \n这一步时间很长，其实可以优化，就是在gui界面中吧不需要的东西全部不选。由于我也不知道那些是可以不用的，所以没有来得及研究，只去掉了一些看起来就不相关的东西。\n等待这一步结束，使用find命令找到v2ray相关的ipk包：\nfind ./ -name &quot;*ipk&quot; | grep v2r\n将这些ipk包scp到路由器中：\nscp  ./bin/packages/arm_cortex-a15_neon-vfpv4/base/*v2ray*.ipk root@69.245.0.87:/root/\nscp ipset-lists_20181104-1_arm_cortex-a15_neon-vfpv4.ipk root@*.*.*.*:/root/\n安装v2ray这个时候可以ssh登陆路由器，然后安装这些包：\nopkg install v2ray_v4.17.0_arm_cortex-a15_neon-vfpv4.ipk\nopkg install luci-app-v2ray-pro_1.0-11_all.ipk\nopkg install luci-i18n-v2ray-pro-zh-cn_1.0-11_all.ipk\n注意安装过程中会各种报错，主要就是依赖包问题，比如dnsmasq，ipset，ipset-list，pdnsd-alt等，这是可以直接使用路由器的源安装，如\nopkg install dnsmasq\nopkg install ipset\n如果在源中找不到那么就从刚刚编译的里面找了之后安装：\nfind ./ -name &quot;*ipk&quot; | grep ipset-list\nfind ./ -name &quot;*ipk&quot; | grep pdnsd-alt\n没有报错就算安装成功。\n客户端配置因为本文中安装了v2ray的luci版本，所以可以直接在luci界面的Service下找到V2Ray Pro，然后填写设置。\n填写server把Server Setting中的服务器地址，端口，id（这里填上文服务器端配置中的uuid），alter ID ，都填上保存。\n翻回国内把Base Setting中的proxy mode改成Overseas Users watch China…，这是进入到unbluck-youku模式。\n比较遗憾的一点是luci中并没有可以定制unblock-youku站点的地方。所以我们可以通过修改配置文件或者自动更新配置文件的方式达成。\n配置文件的路径是/etc/gfwlist/unblock-youku，可以把需要的网址和ip填在其中，这样重启客户端就可以正常使用了。\n\n手动添加方式\n\n比如现在163音乐需要代理的网址是nos.netease.com，将这一条加入到/etc/gfwlist/unblock-youku文件中就可以了\n\n自动添加方式\n\n做一个需要代理网址的的链接。我这里使用的是我常用的链接，只对163音乐，qq音乐，腾讯视频和android tv端的云极光起作用。ipset的使用方法请自己找相关的文章。\n然后修改/etc/init.d/v2ray。这个文件是主程序文件，里面写了如何调用ipset列表以及iptables的路由转发方式。我这里不详细的写了。在这个主程序文件的start函数中加入几行：\ncase &quot;$vt_proxy_mode&quot; in\n    M|V)\n        awk &apos;!/^$/&amp;&amp;!/^#/{printf(&quot;ipset=/%s/&apos;&quot;$vt_gfwlist&quot;&apos;\\n&quot;,$0)}&apos; \\\n            /etc/gfwlist/$vt_gfwlist &gt; /var/etc/dnsmasq-go.d/02-ipset.conf\n\n        ##############################################################################\n        #####这里开始插入。 意思就是说下载上面那个链接的conf文件然后放到dnsmasq的配置文件家中。\n        echo &quot;Coping my conf&quot;\n        wget https://crotoc.github.io/2019/01/22/Unblock-region-restriction-of-musics-videos/unblock.rules.v2ray.dnsmasq.conf \\\n            -O /var/etc/dnsmasq-go.d/unblock.rules.v2ray.dnsmasq.conf 2&gt;/dev/null\n        ##############################################################################\n这样每次启动服务的时候，程序会自动下载某一个链接，用于dnsmasq的配置。\n\n自动添加方式-其他的可能\n\n上面修改v2ray脚本的方式比较暴力，其实这一步我们要实现的东西就是将需要代理的网址和ip放到ipset的unblock-youku中，这样dnsmasq回去自动处理它。所以只要是能达到这个目的的都可以。\n科学上网在luci的base setting中选base on gfw-list模式，然后路由会自动调用/etc/gfwlist/china-banned文件中的地址。gfw代理模式可以很方便的在luci界面中自定义。这里不在多说。\n启动程序现在全部设置好了就可以启动程序了：\n/etc/init.d/v2ray start\n如果list有什么改动，那么就stop在start\n如果v2ray启动中，luci里面会显示V2Ray Pro RUNNING\n其他如果大家不愿意通过luci去设置v2ray的客户端，那么也可以直接ssh到路由器上面启动。大概的步骤是：\n\n写个客户端的config文件\n建立一个ipset的table\n写个iptables的链\n\n这套流程里面最简单的方式可能是直接修改/etc/init.d/v2ray中的start程序中的启动行，将客户端config文件传进去即可。/etc/init.d/v2ray的主要任务就是我上面说的三条。任何一个任务都是可以修改的。\n测试在路由器是ping某一个在列表中的地址，比如：\nping v.youku.com\n然后使用ipset查看unblock-youku列表：\nipset list\n如果上面的ip出现在unblock-youku列表中，那么ipset正确识别了需要代理的链接。\n然后在服务器端看日志，如果可以看到相关链接的日志，那么就大功告成。\n参考链接V2Ray 配置指南|V2Ray 白话文教程lean大的lede项目","dateCreated":"2019-03-22T10:22:30+08:00","dateModified":"2019-03-26T23:05:58+08:00","datePublished":"2019-03-22T10:22:30+08:00","description":"如何在netgear R7800上面安装v2ray服务","headline":"How to install v2ray service on R7800","image":["https://images.pexels.com/photos/371633/pexels-photo-371633.jpeg?auto=compress&cs=tinysrgb&h=750&w=1260","https://images.pexels.com/photos/371633/pexels-photo-371633.jpeg?auto=compress&cs=tinysrgb&h=750&w=1260"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/"},"publisher":{"@type":"Organization","name":null,"sameAs":["https://github.com/crotoc?tab=repositories","mailto:crotoc@gmail.com"],"image":"https://www.insidescience.org/sites/default/files/sites/default/files/images/articles/top-images/2018/5_heic1808a_crop.jpg","logo":{"@type":"ImageObject","url":"https://www.insidescience.org/sites/default/files/sites/default/files/images/articles/top-images/2018/5_heic1808a_crop.jpg"}},"url":"https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/","keywords":"科学上网","thumbnailUrl":"https://images.pexels.com/photos/371633/pexels-photo-371633.jpeg?auto=compress&cs=tinysrgb&h=750&w=1260"}</script>
    <meta name="description" content="如何在netgear R7800上面安装v2ray服务">
<meta name="keywords" content="r7800">
<meta property="og:type" content="blog">
<meta property="og:title" content="How to install v2ray service on R7800">
<meta property="og:url" content="https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/index.html">
<meta property="og:site_name" content="Chen Rui&#39;s Blog">
<meta property="og:description" content="如何在netgear R7800上面安装v2ray服务">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2019-03-26T15:05:58.324Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to install v2ray service on R7800">
<meta name="twitter:description" content="如何在netgear R7800上面安装v2ray服务">
<meta name="twitter:creator" content="@crnormal">
    
    
        
    
    
        <meta property="og:image" content="https://www.insidescience.org/sites/default/files/sites/default/files/images/articles/top-images/2018/5_heic1808a_crop.jpg"/>
    
    
        <meta property="og:image" content="https://images.pexels.com/photos/371633/pexels-photo-371633.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=750&amp;w=1260"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://images.pexels.com/photos/371633/pexels-photo-371633.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=750&amp;w=1260" />
    
    
        <meta property="og:image" content="https://images.pexels.com/photos/371633/pexels-photo-371633.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=750&amp;w=1260"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://images.pexels.com/photos/371633/pexels-photo-371633.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=750&amp;w=1260" />
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-c4ozcsklz4kht2pebhp44xorvyverh23toayhn7i6ubrpyedak24hv1v0hyd.min.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-136975492-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-136975492-1');
    </script>


    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Chen Rui&#39;s Blog</a>
    </div>
    
        
            <a class="header-right-picture " href="#about">
        
        
            <img class="header-picture" src="https://www.insidescience.org/sites/default/files/sites/default/files/images/articles/top-images/2018/5_heic1808a_crop.jpg" alt="作者的图片">
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="https://www.insidescience.org/sites/default/files/sites/default/files/images/articles/top-images/2018/5_heic1808a_crop.jpg" alt="作者的图片">
                </a>
                <h4 class="sidebar-profile-name"></h4>
                
                    <h5 class="sidebar-profile-bio"><p>一生追寻热爱而杰出</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/ " title="首页">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" title="分类">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" title="标签">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" title="归档">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link open-algolia-search" href="#search" title="搜索">
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about" title="关于">
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/crotoc?tab=repositories" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="mailto:crotoc@gmail.com" target="_blank" rel="noopener" title="邮箱">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
        <div class="post-header-cover
                    text-center
                    post-header-cover--full" style="background-image:url('https://images.pexels.com/photos/371633/pexels-photo-371633.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=750&amp;w=1260');" data-behavior="4">
            
                <div class="post-header main-content-wrap text-center">
    
        <h1 class="post-title">
            How to install v2ray service on R7800
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-03-22T10:22:30+08:00">
	
		    3月 22, 2019
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/网络技术/">网络技术</a>


    
</div>

    
</div>

            
        </div>

            <div id="main" data-behavior="4"
                 class="hasCover
                        hasCoverMetaIn
                        hasCoverCaption">
                
<article class="post">
    
        <span class="post-header-cover-caption caption">Hexo建站分享</span>
    
    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- excerpt --><p></p>
<h1 id="如何在netgear-R7800上面安装v2ray服务"><a href="#如何在netgear-R7800上面安装v2ray服务" class="headerlink" title="如何在netgear R7800上面安装v2ray服务"></a>如何在netgear R7800上面安装v2ray服务</h1><h1 id="table-of-contents">目录</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#如何在netgear-R7800上面安装v2ray服务"><span class="toc-text">如何在netgear R7800上面安装v2ray服务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#要求"><span class="toc-text">要求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#部署v2ray服务端"><span class="toc-text">部署v2ray服务端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#v2ray服务器端配置文件"><span class="toc-text">v2ray服务器端配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#运行v2ray服务端"><span class="toc-text">运行v2ray服务端</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#客户端部署"><span class="toc-text">客户端部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#openWRT的安装"><span class="toc-text">openWRT的安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编译v2ray安装包"><span class="toc-text">编译v2ray安装包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装v2ray"><span class="toc-text">安装v2ray</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#客户端配置"><span class="toc-text">客户端配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#填写server"><span class="toc-text">填写server</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#翻回国内"><span class="toc-text">翻回国内</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#科学上网"><span class="toc-text">科学上网</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#启动程序"><span class="toc-text">启动程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他"><span class="toc-text">其他</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#测试"><span class="toc-text">测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考链接"><span class="toc-text">参考链接</span></a></li></ol></li></ol>
<p>我在前面一篇博客里面写过如何安装ss的服务，由于常用的ss失效（端口被封，ss已经能够被特征识别），所以折腾了一下v2ray。这想这应该也是大势所趋吧。</p>
<h2 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h2><ol>
<li>一台安装了openWRT的路由器，本文使用r7800。</li>
<li>一个可用的v2ray服务器，可以花钱买，也可以自己用虚拟机搭建一个。本文使用自己搭建。</li>
<li>一个ubuntu系统用于编译相关的软件，使v2ray服务可以在router上面运行。</li>
<li>如果部署过ss服务器和客户端，那就完美了</li>
<li>懂一些linux</li>
</ol>
<h2 id="部署v2ray服务端"><a href="#部署v2ray服务端" class="headerlink" title="部署v2ray服务端"></a>部署v2ray服务端</h2><p>这一部分主要参看了这个<a href="https://toutyrater.github.io/prep/install.html" target="_blank" rel="noopener">教程</a>，在这里我只写下主要步骤。</p>
<p>登陆自己需要部署v2ray的服务器，如果是翻回国内就搞个有国内公网ip的虚拟机，如果科学上网，就弄个有国外ip虚拟机。然后下载脚本并且安装：</p>
<pre><code>wget https://install.direct/go.sh
sudo bash go.sh
</code></pre><p>如果其中缺少什么依赖包，就自己安装好。</p>
<h3 id="v2ray服务器端配置文件"><a href="#v2ray服务器端配置文件" class="headerlink" title="v2ray服务器端配置文件"></a>v2ray服务器端配置文件</h3><p>和ss服务器一样，需要针对v2ray写一个配置文件，这是我的。下面我来解释一下配置文件的内容:</p>
<pre><code>{
//设置v2ray的log和orr文件；设置log的level
&quot;log&quot;: {
    &quot;access&quot;: &quot;/home/ruichen/v2ray/v2ray.log&quot;,
    &quot;error&quot;: &quot;/home/ruichen/v2ray/v2ray.err&quot;,
    &quot;loglevel&quot;: &quot;warning&quot;
    },
//服务器端入站包的配置，即代理服务器信息
&quot;inbounds&quot;:[//main port
{
    &quot;port&quot;: 18888,
    &quot;listen&quot;: &quot;0.0.0.0&quot;,
    &quot;protocol&quot;: &quot;vmess&quot;,
    &quot;settings&quot;: {
    &quot;clients&quot;: [
        {
//这里需要一个UUID，可以找网站生成一个，相当于ss的用户名。
        &quot;id&quot;: &quot;67ee3d0e-77c1-4776-8573-82ebc55176f9&quot;,
        &quot;alterId&quot;: 64
        }
    ],
    //因为现在端口被查的厉害，所以我使用了一个随机端口的策略，避免长期使用一个端口容易被封。先建立一个绕行端口的通讯。
    &quot;detour&quot;: { //绕行配置，即指示客户端使用 dynamicPort 的配置通信
        &quot;to&quot;: &quot;dynamicPort&quot;
    }
    },
    //这里的流量协议，我使用简单的kcp，听说比tcp好些
    &quot;streamSettings&quot;: {
        &quot;network&quot;: &quot;kcp&quot;
    }
    },
{
//随机端口的配置
    &quot;protocol&quot;: &quot;vmess&quot;,
    &quot;port&quot;: &quot;18900-19000&quot;, // 端口范围
    &quot;tag&quot;: &quot;dynamicPort&quot;,  // 与上面的 detour to 相同
    &quot;settings&quot;: {
        &quot;default&quot;: {
        &quot;alterId&quot;: 64
    }
    },
    //如何分配随机端口
    &quot;allocate&quot;: {            // 分配模式
        &quot;strategy&quot;: &quot;random&quot;,  // 随机开启
        &quot;concurrency&quot;: 2,      // 同时开放两个端口,这个值最大不能超过端口范围的 1/3
        &quot;refresh&quot;: 3           // 每三分钟刷新一次
    },
    &quot;streamSettings&quot;: {
        &quot;network&quot;: &quot;kcp&quot;
    }
}
],
//服务器端的出站包配置，这里使用freedom，意思就是自动处理进来包的类型
&quot;outbounds&quot;: [{
    &quot;protocol&quot;: &quot;freedom&quot;,
    &quot;settings&quot;: {}
}],
//v2ray自带一个routing的功能，能够将设置的ip或者域名自动的routing。其中outboundTag有三种，这里使用blocked，意思是从这些ip来的通讯全部屏蔽掉，下面主要是本机的私有地址。
&quot;routing&quot;: {
    &quot;strategy&quot;: &quot;rules&quot;,
    &quot;settings&quot;: {
    &quot;rules&quot;: [
        {
        &quot;type&quot;: &quot;field&quot;,
        &quot;ip&quot;: [
            &quot;0.0.0.0/8&quot;,
            &quot;10.0.0.0/8&quot;,
            &quot;100.64.0.0/10&quot;,
            &quot;127.0.0.0/8&quot;,
            &quot;169.254.0.0/16&quot;,
            &quot;172.16.0.0/12&quot;,
            &quot;192.0.0.0/24&quot;,
            &quot;192.0.2.0/24&quot;,
            &quot;192.168.0.0/16&quot;,
            &quot;198.18.0.0/15&quot;,
            &quot;198.51.100.0/24&quot;,
            &quot;203.0.113.0/24&quot;,
            &quot;::1/128&quot;,
            &quot;fc00::/7&quot;,
            &quot;fe80::/10&quot;
        ],
        &quot;outboundTag&quot;: &quot;blocked&quot;
    }
    ]
}
    }
}
</code></pre><p>UUID可以使用<a href="https://www.uuidgenerator.net/" target="_blank" rel="noopener">网站</a>随机生成一个。</p>
<h3 id="运行v2ray服务端"><a href="#运行v2ray服务端" class="headerlink" title="运行v2ray服务端"></a>运行v2ray服务端</h3><p>到这里我们就算配置完成了，首先使用下面命令测试一下config.json是否存在错误：</p>
<pre><code>/usr/bin/v2ray/v2ray -test -config /etc/v2ray/config.json
</code></pre><p>如果顺利通过，就可以运行服务器：</p>
<pre><code>/usr/bin/v2ray/v2ray -config /etc/v2ray/config.json
</code></pre><p>如果想使用systemctl来启动v2ray，需要用你的配置文件替换掉系统中/etc/v2ray/目录下的config.json文件。我这里使用软连接的方式，方便以后修改。</p>
<pre><code>rm /etc/v2ray/config.json
ln -s ~/v2ray/config.json /etc/v2ray/config.json
</code></pre><h2 id="客户端部署"><a href="#客户端部署" class="headerlink" title="客户端部署"></a>客户端部署</h2><p>v2ray比较神奇的地方在于客户端其实使用的是服务端的程序，只是配置文件不同。我这次需要将客户端安装到路由器上。</p>
<h3 id="openWRT的安装"><a href="#openWRT的安装" class="headerlink" title="openWRT的安装"></a>openWRT的安装</h3><p>直接参看前面的<a href="https://crotoc.github.io/2018/09/14/Unblock-Youku-on-a-openWRT-Router/">如何在路由器上安装openwrt</a></p>
<h3 id="编译v2ray安装包"><a href="#编译v2ray安装包" class="headerlink" title="编译v2ray安装包"></a>编译v2ray安装包</h3><p>由于v2ray比较新，是ss被喝茶之后出现的，所以现在openwrt各版本并没有直接的安装包，我这里借用了<a href="https://github.com/coolsnowwolf/lede/tree/master/package/lean" target="_blank" rel="noopener">lean大的lede项目</a>中的v2ray源码包。这个lede项目集成了很多种架构的核心，希望大家的router都能在里面找到。</p>
<p>首先，安装一个ubuntu 64bit，然后lede项目克隆到本地：</p>
<pre><code>git clone https://github.com/coolsnowwolf/lede
</code></pre><p>接着，进入lede目录，更新并安装feeds：</p>
<pre><code>cd lede
./scripts/feeds update -a
./scripts/feeds install -a
</code></pre><p>再接着使用gui界面选择需要编译的路由：</p>
<pre><code>make menuconfig
</code></pre><p>在这个gui界面中，需要做如下选择：</p>
<ol>
<li>Target System下面的Qualcomm Atheros IPQ806X，因为r7800的就是使用的这颗核心。</li>
<li>Network目录下的v2ray需要选上。</li>
<li>LuCI下面的Application下的Include V2ray需要选上。</li>
</ol>
<p>然后编译：</p>
<pre><code>make -j1 V=s 
</code></pre><p>这一步时间很长，其实可以优化，就是在gui界面中吧不需要的东西全部不选。由于我也不知道那些是可以不用的，所以没有来得及研究，只去掉了一些看起来就不相关的东西。</p>
<p>等待这一步结束，使用find命令找到v2ray相关的ipk包：</p>
<pre><code>find ./ -name &quot;*ipk&quot; | grep v2r
</code></pre><p>将这些ipk包scp到路由器中：</p>
<pre><code>scp  ./bin/packages/arm_cortex-a15_neon-vfpv4/base/*v2ray*.ipk root@69.245.0.87:/root/
scp ipset-lists_20181104-1_arm_cortex-a15_neon-vfpv4.ipk root@*.*.*.*:/root/
</code></pre><h3 id="安装v2ray"><a href="#安装v2ray" class="headerlink" title="安装v2ray"></a>安装v2ray</h3><p>这个时候可以ssh登陆路由器，然后安装这些包：</p>
<pre><code>opkg install v2ray_v4.17.0_arm_cortex-a15_neon-vfpv4.ipk
opkg install luci-app-v2ray-pro_1.0-11_all.ipk
opkg install luci-i18n-v2ray-pro-zh-cn_1.0-11_all.ipk
</code></pre><p>注意安装过程中会各种报错，主要就是依赖包问题，比如dnsmasq，ipset，ipset-list，pdnsd-alt等，这是可以直接使用路由器的源安装，如</p>
<pre><code>opkg install dnsmasq
opkg install ipset
</code></pre><p>如果在源中找不到那么就从刚刚编译的里面找了之后安装：</p>
<pre><code>find ./ -name &quot;*ipk&quot; | grep ipset-list
find ./ -name &quot;*ipk&quot; | grep pdnsd-alt
</code></pre><p>没有报错就算安装成功。</p>
<h3 id="客户端配置"><a href="#客户端配置" class="headerlink" title="客户端配置"></a>客户端配置</h3><p>因为本文中安装了v2ray的luci版本，所以可以直接在luci界面的Service下找到V2Ray Pro，然后填写设置。</p>
<h4 id="填写server"><a href="#填写server" class="headerlink" title="填写server"></a>填写server</h4><p>把Server Setting中的服务器地址，端口，id（这里填上文服务器端配置中的uuid），alter ID ，都填上保存。</p>
<h4 id="翻回国内"><a href="#翻回国内" class="headerlink" title="翻回国内"></a>翻回国内</h4><p>把Base Setting中的proxy mode改成Overseas Users watch China…，这是进入到unbluck-youku模式。</p>
<p>比较遗憾的一点是luci中并没有可以定制unblock-youku站点的地方。所以我们可以通过修改配置文件或者自动更新配置文件的方式达成。</p>
<p>配置文件的路径是/etc/gfwlist/unblock-youku，可以把需要的网址和ip填在其中，这样重启客户端就可以正常使用了。</p>
<ol>
<li>手动添加方式</li>
</ol>
<p>比如现在163音乐需要代理的网址是nos.netease.com，将这一条加入到/etc/gfwlist/unblock-youku文件中就可以了</p>
<ol start="2">
<li>自动添加方式</li>
</ol>
<p>做一个需要代理网址的的链接。我这里使用的是我常用的<a href="https://crotoc.github.io/2019/01/22/Unblock-region-restriction-of-musics-videos/unblock.rules.v2ray.dnsmasq.conf">链接</a>，只对163音乐，qq音乐，腾讯视频和android tv端的云极光起作用。ipset的使用方法请自己找相关的文章。</p>
<p>然后修改/etc/init.d/v2ray。这个文件是主程序文件，里面写了如何调用ipset列表以及iptables的路由转发方式。我这里不详细的写了。在这个主程序文件的start函数中加入几行：</p>
<pre><code>case &quot;$vt_proxy_mode&quot; in
    M|V)
        awk &apos;!/^$/&amp;&amp;!/^#/{printf(&quot;ipset=/%s/&apos;&quot;$vt_gfwlist&quot;&apos;\n&quot;,$0)}&apos; \
            /etc/gfwlist/$vt_gfwlist &gt; /var/etc/dnsmasq-go.d/02-ipset.conf

        ##############################################################################
        #####这里开始插入。 意思就是说下载上面那个链接的conf文件然后放到dnsmasq的配置文件家中。
        echo &quot;Coping my conf&quot;
        wget https://crotoc.github.io/2019/01/22/Unblock-region-restriction-of-musics-videos/unblock.rules.v2ray.dnsmasq.conf \
            -O /var/etc/dnsmasq-go.d/unblock.rules.v2ray.dnsmasq.conf 2&gt;/dev/null
        ##############################################################################
</code></pre><p>这样每次启动服务的时候，程序会自动下载某一个链接，用于dnsmasq的配置。</p>
<ol start="3">
<li>自动添加方式-其他的可能</li>
</ol>
<p>上面修改v2ray脚本的方式比较暴力，其实这一步我们要实现的东西就是将需要代理的网址和ip放到ipset的unblock-youku中，这样dnsmasq回去自动处理它。所以只要是能达到这个目的的都可以。</p>
<h4 id="科学上网"><a href="#科学上网" class="headerlink" title="科学上网"></a>科学上网</h4><p>在luci的base setting中选base on gfw-list模式，然后路由会自动调用/etc/gfwlist/china-banned文件中的地址。gfw代理模式可以很方便的在luci界面中自定义。这里不在多说。</p>
<h4 id="启动程序"><a href="#启动程序" class="headerlink" title="启动程序"></a>启动程序</h4><p>现在全部设置好了就可以启动程序了：</p>
<pre><code>/etc/init.d/v2ray start
</code></pre><p>如果list有什么改动，那么就stop在start</p>
<p>如果v2ray启动中，luci里面会显示V2Ray Pro RUNNING</p>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p>如果大家不愿意通过luci去设置v2ray的客户端，那么也可以直接ssh到路由器上面启动。大概的步骤是：</p>
<ol>
<li>写个客户端的config文件</li>
<li>建立一个ipset的table</li>
<li>写个iptables的链</li>
</ol>
<p>这套流程里面最简单的方式可能是直接修改/etc/init.d/v2ray中的start程序中的启动行，将客户端config文件传进去即可。/etc/init.d/v2ray的主要任务就是我上面说的三条。任何一个任务都是可以修改的。</p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>在路由器是ping某一个在列表中的地址，比如：</p>
<pre><code>ping v.youku.com
</code></pre><p>然后使用ipset查看unblock-youku列表：</p>
<pre><code>ipset list
</code></pre><p>如果上面的ip出现在unblock-youku列表中，那么ipset正确识别了需要代理的链接。</p>
<p>然后在服务器端看日志，如果可以看到相关链接的日志，那么就大功告成。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://toutyrater.github.io/" target="_blank" rel="noopener">V2Ray 配置指南|V2Ray 白话文教程</a><br><a href="https://github.com/coolsnowwolf/lede" target="_blank" rel="noopener">lean大的lede项目</a></p>
            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/科学上网/">科学上网</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/03/16/Bugs-when-using-the-tranquilpeak-hexo-theme/" data-tooltip="Bugs when using the tranquilpeak hexo theme" aria-label="下一篇: Bugs when using the tranquilpeak hexo theme">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/" title="分享到 Facebook">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/" title="分享到 Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/" title="分享到 Google+">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/" title="分享到 Weibo">
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/&amp;title=How to install v2ray service on R7800" title="分享到 QQ">
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/" title="分享到 Qzone">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#gitment">
                         <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="gitment"></div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 null. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/03/16/Bugs-when-using-the-tranquilpeak-hexo-theme/" data-tooltip="Bugs when using the tranquilpeak hexo theme" aria-label="下一篇: Bugs when using the tranquilpeak hexo theme">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/" title="分享到 Facebook">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/" title="分享到 Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/" title="分享到 Google+">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/" title="分享到 Weibo">
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/&amp;title=How to install v2ray service on R7800" title="分享到 QQ">
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/" title="分享到 Qzone">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#gitment">
                         <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/">
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/">
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/">
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>分享到 Google+</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/">
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/&amp;title=How to install v2ray service on R7800">
                        <i class="fab fa-qq" aria-hidden="true"></i><span>分享到 QQ</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/">
                        <i class="fa fa-star" aria-hidden="true"></i><span>分享到 Qzone</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.insidescience.org/sites/default/files/sites/default/files/images/articles/top-images/2018/5_heic1808a_crop.jpg" alt="作者的图片">
        
            <h4 id="about-card-name"></h4>
        
            <div id="about-card-bio"><p>一生追寻热爱而杰出</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>遗传性，基因组学，生物信息学</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                Nashville, TN, U.S.
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search" class="form-control input--large search-input" placeholder="Search ">
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">没有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://crotoc.github.io/2018/08/10/gnu-join/">
                            <img class="media-image" src="https://img1.quimg.com/upload/201712/1513834333388.jpg" width="90" height="90">
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://crotoc.github.io/2018/08/10/gnu-join/">
                            <h3 class="media-heading">Gnu join - join two files by specified field</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2018年8月10日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Gnu join - join two files by specified field<br></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://crotoc.github.io/2018/09/11/rmarkdown-config/">
                            <img class="media-image" src="http://www.cncd8.com/uploads/allimg/120308/1-12030R10R7.jpg" width="90" height="90">
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://crotoc.github.io/2018/09/11/rmarkdown-config/">
                            <h3 class="media-heading">Setup rmarkdown on server without Rstudio</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2018年9月11日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Setup rmarkdown on server without Rstudio<br></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://crotoc.github.io/2018/09/25/Modify-the-hotkey-of-Chinese-English-language-switching-in-Windows-10/">
                            <img class="media-image" src="https://static.boredpanda.com/blog/wp-content/uploads/2015/11/reflection-landscape-photography-jaewoon-u-fb.jpg" width="90" height="90">
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://crotoc.github.io/2018/09/25/Modify-the-hotkey-of-Chinese-English-language-switching-in-Windows-10/">
                            <h3 class="media-heading">Modify the hotkey of Chinese-English language switching in Windows 10</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2018年9月25日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Modify the hotkey of Chinese-English language switching in Windows 10<br></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://crotoc.github.io/2018/09/28/Install-customized-fonts-for-imagemagick/">
                            <img class="media-image" src="https://images.pexels.com/photos/7314/nature-sunset-flowers-silhouette.jpg?auto=compress&amp;cs=tinysrgb&amp;dpr=1&amp;w=500" width="90" height="90">
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://crotoc.github.io/2018/09/28/Install-customized-fonts-for-imagemagick/">
                            <h3 class="media-heading">Install customized fonts for imagemagick</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2018年9月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Install customized fonts for imagemagick<br></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://crotoc.github.io/2019/01/22/Unblock-region-restriction-of-musics-videos/">
                            <img class="media-image" src="https://store-images.s-microsoft.com/image/apps.6197.13569891971238701.dab36319-31db-42e5-b32b-edb97c11d8b7.b4ec6763-6d93-4369-87b7-81c25913395f?mode=scale&amp;q=90&amp;h=1080&amp;w=1920" width="90" height="90">
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://crotoc.github.io/2019/01/22/Unblock-region-restriction-of-musics-videos/">
                            <h3 class="media-heading">List for unblock region restriction of musics/videos</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年1月22日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>List for unblock region restriction of musics/videos<br></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://crotoc.github.io/2019/01/22/terminal-in-windows-sub-linux-system/">
                            <img class="media-image" src="http://img.univs.cn/webfile/event/279/4585308/D5B18660-6B04-11E4-A4B4-E02212B11521/1415863236024_4585308.JPG" width="90" height="90">
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://crotoc.github.io/2019/01/22/terminal-in-windows-sub-linux-system/">
                            <h3 class="media-heading">Windows 10下面最好的terminal (WSL)</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年1月22日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Windows 10下面最好的terminal (WSL)<br></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://crotoc.github.io/2019/03/16/Bugs-when-using-the-tranquilpeak-hexo-theme/">
                            <img class="media-image" src="https://static.photocdn.pt/images/articles/2017_1/iStock-545347988.jpg" width="90" height="90">
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://crotoc.github.io/2019/03/16/Bugs-when-using-the-tranquilpeak-hexo-theme/">
                            <h3 class="media-heading">Bugs when using the tranquilpeak hexo theme</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年3月16日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Bugs when using the tranquilpeak hexo theme<br></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/">
                            <img class="media-image" src="https://images.pexels.com/photos/371633/pexels-photo-371633.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=750&amp;w=1260" width="90" height="90">
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/">
                            <h3 class="media-heading">How to install v2ray service on R7800</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年3月22日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>如何在netgear R7800上面安装v2ray服务<br></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium" data-message-zero="没有找到文章" data-message-one="找到 1 篇文章" data-message-other="找到 {n} 篇文章">
                找到 8 篇文章
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-dbd16rvloemmuxdzniplmnxxvwoz24eya9wol0b7vvmlokgqsjivmb8dnscy.min.js"></script>
<!--SCRIPTS END-->

    
        <script type="text/javascript">
            (function() {
                function render() {
                    new Gitment({
                        id: 'https://crotoc.github.io/2019/03/22/How-to-install-v2ray-service-on-R7800/',
                        owner: 'crotoc',
                        repo: 'crotoc.github.io',
                        oauth: {
                            client_id: '8949a42af7f682244101',
                            client_secret: '65bb20f6caaa62c4f2bfd335684056ec2f936473',
                        }
                    }).render('gitment');
                }
                var gc = document.createElement('script');
                gc.type = 'text/javascript';
                gc.src = '//jjeejj.github.io/js/gitment.js';
                gc.charset = 'UTF-8';
                gc.onload = render;
                gc.async = true;
                document.querySelector('body').appendChild(gc);
                var gcs = document.createElement('link');
                gcs.href = '//jjeejj.github.io/css/gitment.css';
                gcs.type = 'text/css';
                gcs.rel = 'stylesheet';
                gcs.media = 'screen,print';
                document.querySelector('head').appendChild(gcs);
            })();
	    </script>
    


    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('MI05O8RBDD', 'f4469462d3dc48c35cb5b571a9c43404');
        var algoliaIndex = algoliaClient.initIndex('Blog');
    </script>


    </body>
</html>
